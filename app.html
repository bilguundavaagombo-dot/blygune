<!DOCTYPE html>
<html lang="mn">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
Â  Â  <title>AMT - Ğ¥Ğ¾Ğ¾Ğ»Ğ½Ñ‹ Ğ–Ğ¾Ñ€</title>
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
Â  Â  <style>
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  --bg: #F8F9FB;
Â  Â  Â  Â  Â  Â  --text: #1F2937;
Â  Â  Â  Â  Â  Â  --sub-text: #6B7280;
Â  Â  Â  Â  Â  Â  --accent: #FF4500;
Â  Â  Â  Â  Â  Â  --accent-grad: linear-gradient(135deg, #FF4500 0%, #FF8C00 100%);
Â  Â  Â  Â  Â  Â  --border: #E5E7EB;
Â  Â  Â  Â  Â  Â  --input-bg: #FFFFFF;
Â  Â  Â  Â  Â  Â  --surface: #FFFFFF;
Â  Â  Â  Â  Â  Â  --radius: 20px;
Â  Â  Â  Â  Â  Â  --font: 'Inter', sans-serif;
Â  Â  Â  Â  Â  Â  --font-head: 'Playfair Display', serif;
Â  Â  Â  Â  Â  Â  --shadow: 0 10px 40px -10px rgba(0,0,0,0.08);
Â  Â  Â  Â  Â  Â  --glass: blur(14px);
Â  Â  Â  Â  }

Â  Â  Â  Â  [data-theme="dark"] {
Â  Â  Â  Â  Â  Â  --bg: #0F1115;
Â  Â  Â  Â  Â  Â  --text: #F3F4F6;
Â  Â  Â  Â  Â  Â  --sub-text: #9CA3AF;
Â  Â  Â  Â  Â  Â  --accent: #FF5722;
Â  Â  Â  Â  Â  Â  --accent-grad: linear-gradient(135deg, #FF5722 0%, #FF9800 100%);
Â  Â  Â  Â  Â  Â  --border: #2D3748;
Â  Â  Â  Â  Â  Â  --input-bg: #1A202C;
Â  Â  Â  Â  Â  Â  --surface: #1A202C;
Â  Â  Â  Â  Â  Â  --shadow: none;
Â  Â  Â  Â  }

Â  Â  Â  Â  * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  background-color: var(--bg); color: var(--text); font-family: var(--font);
Â  Â  Â  Â  Â  Â  min-height: 100vh; overflow-x: hidden;Â 
Â  Â  Â  Â  Â  Â  transition: background 0.3s, color 0.3s;
Â  Â  Â  Â  Â  Â  padding-bottom: 140px;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* HEADER */
Â  Â  Â  Â  header {
Â  Â  Â  Â  Â  Â  padding: 15px 30px; display: flex; justify-content: space-between; align-items: center;
Â  Â  Â  Â  Â  Â  position: fixed; top: 0; left: 0; width: 100%; z-index: 100;
Â  Â  Â  Â  Â  Â  background: rgba(255, 255, 255, 0.6); backdrop-filter: var(--glass);
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid var(--border);
Â  Â  Â  Â  }
Â  Â  Â  Â  [data-theme="dark"] header { background: rgba(15, 17, 21, 0.6); }

Â  Â  Â  Â  .logo-group { cursor: pointer; display: flex; flex-direction: column; text-decoration: none; color: inherit; line-height: 1; }
Â  Â  Â  Â  .logo { font-family: var(--font-head); font-weight: 900; font-size: 2rem; letter-spacing: -1px; background: var(--accent-grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
Â  Â  Â  Â  .logo-sub { font-family: 'Inter', sans-serif; font-size: 0.65rem; font-weight: 800; text-transform: uppercase; letter-spacing: 2px; margin-top: 5px; color: var(--text); opacity: 0.8; }
Â  Â  Â  Â  .icon-btn { width: 40px; height: 40px; border-radius: 50%; background: var(--surface); border: 1px solid var(--border); font-size: 1.2rem; cursor: pointer; color: var(--text); transition: 0.3s; box-shadow: var(--shadow); }
Â  Â  Â  Â  .icon-btn:hover { border-color: var(--accent); color: var(--accent); transform: translateY(-2px); }

Â  Â  Â  Â  /* VIEW MANAGEMENT */
Â  Â  Â  Â  .view-section { display: none; width: 100%; max-width: 700px; margin: 100px auto 0 auto; padding: 0 20px; animation: fadeIn 0.4s ease; }
Â  Â  Â  Â  .view-section.active { display: flex; flex-direction: column; align-items: center; }

Â  Â  Â  Â  /* HERO & INPUTS */
Â  Â  Â  Â  .hero { text-align: center; margin-bottom: 35px; width: 100%; }
Â  Â  Â  Â  .hero h1 { font-family: var(--font-head); font-size: 2.5rem; margin-bottom: 10px; font-weight: 900; }
Â  Â  Â  Â  .input-wrapper { position: relative; margin-bottom: 20px; width: 100%; }
Â  Â  Â  Â  .main-input { width: 100%; padding: 22px 25px; border-radius: 25px; background: var(--input-bg); border: 2px solid var(--border); font-size: 1.2rem; color: var(--text); outline: none; transition: 0.3s; box-shadow: var(--shadow); }
Â  Â  Â  Â  .main-input:focus { border-color: var(--accent); }
Â  Â  Â  Â  .tags-area { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 30px; min-height: 40px; width: 100%; }
Â  Â  Â  Â  .tag { background: var(--surface); border: 1px solid var(--border); padding: 10px 20px; border-radius: 50px; font-weight: 600; color: var(--text); cursor: default; display: flex; align-items: center; gap: 8px; animation: pop 0.3s ease; }
Â  Â  Â  Â  .section-label { font-size: 0.8rem; font-weight: 800; color: var(--sub-text); text-transform: uppercase; letter-spacing: 1px; margin: 30px 0 12px 0; display: block; width: 100%; }

Â  Â  Â  Â  /* RECIPE CARDS */
Â  Â  Â  Â  .recipe-card {
Â  Â  Â  Â  Â  Â  background: var(--surface); border: 1px solid var(--border); border-radius: 20px;
Â  Â  Â  Â  Â  Â  padding: 20px; margin-bottom: 15px; width: 100%; cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: 0.3s; position: relative; overflow: hidden;
Â  Â  Â  Â  }
Â  Â  Â  Â  .recipe-card:hover { transform: translateY(-3px); border-color: var(--accent); box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
Â  Â  Â  Â  .rc-title { font-weight: 800; font-size: 1.2rem; margin-bottom: 5px; font-family: var(--font-head); }
Â  Â  Â  Â  .rc-desc { color: var(--sub-text); font-size: 0.9rem; line-height: 1.4; }
Â  Â  Â  Â  .rc-arrow { position: absolute; right: 20px; top: 50%; transform: translateY(-50%); color: var(--accent); font-weight: 900; font-size: 1.5rem; }

Â  Â  Â  Â  /* DETAIL VIEW */
Â  Â  Â  Â  .detail-header { width: 100%; margin-bottom: 20px; }
Â  Â  Â  Â  .back-btn { background: none; border: none; font-size: 1rem; color: var(--sub-text); cursor: pointer; display: flex; align-items: center; gap: 5px; font-weight: 600; margin-bottom: 15px; }
Â  Â  Â  Â  .detail-title { font-size: 2.2rem; font-family: var(--font-head); font-weight: 900; color: var(--text); line-height: 1.1; margin-bottom: 10px; }
Â  Â  Â  Â  .detail-content { width: 100%; background: var(--surface); padding: 30px; border-radius: 20px; border: 1px solid var(--border); line-height: 1.7; font-size: 1rem; }
Â  Â  Â  Â  .detail-content h3 { color: var(--accent); margin: 25px 0 15px 0; font-size: 1.3rem; border-bottom: 2px solid var(--border); padding-bottom: 10px; }
Â  Â  Â  Â  .detail-content ul { padding-left: 20px; margin-bottom: 20px; }
Â  Â  Â  Â  .detail-content li { margin-bottom: 10px; color: var(--text); }
Â  Â  Â  Â  .detail-content strong { color: var(--text); font-weight: 800; }

Â  Â  Â  Â  /* LOADING */
Â  Â  Â  Â  .loader-screen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); z-index: 2000; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
Â  Â  Â  Â  .loader-screen.active { display: flex; }
Â  Â  Â  Â  .spinner { font-size: 3rem; animation: spin 2s infinite; display: block; margin-bottom: 20px; }

Â  Â  Â  Â  /* UI ELEMENTS */
Â  Â  Â  Â  .style-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px; width: 100%; }
Â  Â  Â  Â  .style-chip { background: var(--surface); border: 1px solid var(--border); border-radius: 16px; padding: 15px 10px; text-align: center; cursor: pointer; transition: 0.2s; display: flex; flex-direction: column; gap: 5px; align-items: center; }
Â  Â  Â  Â  .style-chip.selected { background: var(--text); color: var(--bg); box-shadow: 0 8px 25px rgba(0,0,0,0.15); }
Â  Â  Â  Â  .level-bar { display: flex; background: var(--surface); padding: 6px; border-radius: 20px; border: 1px solid var(--border); width: 100%; }
Â  Â  Â  Â  .lvl-step { flex: 1; text-align: center; padding: 12px; border-radius: 14px; cursor: pointer; transition: 0.3s; color: var(--sub-text); display: flex; flex-direction: column; gap: 4px; user-select: none; }
Â  Â  Â  Â  .lvl-step.active { background: var(--text); color: var(--bg); box-shadow: 0 4px 15px rgba(0,0,0,0.15); }
Â  Â  Â  Â  .level-desc { text-align: center; font-size: 0.9rem; color: var(--accent); margin-top: 10px; font-weight: 600; font-style: italic; min-height: 24px; width: 100%; }

Â  Â  Â  Â  .pantry-box { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); padding: 25px; margin-top: 15px; width: 100%; }
Â  Â  Â  Â  .pantry-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
Â  Â  Â  Â  .switch { position: relative; display: inline-block; width: 48px; height: 26px; }
Â  Â  Â  Â  .switch input { opacity: 0; width: 0; height: 0; }
Â  Â  Â  Â  .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--border); transition: .4s; border-radius: 34px; }
Â  Â  Â  Â  .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
Â  Â  Â  Â  input:checked + .slider { background-color: var(--accent); }
Â  Â  Â  Â  input:checked + .slider:before { transform: translateX(22px); }
Â  Â  Â  Â  .pantry-chips-grid { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; transition: 0.3s; }
Â  Â  Â  Â  .pantry-content.disabled .pantry-chips-grid { opacity: 0.3; pointer-events: none; }
Â  Â  Â  Â  .p-chip { padding: 8px 14px; background: var(--bg); border: 1px solid var(--border); border-radius: 12px; font-size: 0.85rem; font-weight: 600; color: var(--sub-text); cursor: pointer; transition: 0.2s; user-select: none; }
Â  Â  Â  Â  .p-chip.active { background: var(--accent-grad); color: white; border: none; box-shadow: 0 4px 10px rgba(255, 69, 0, 0.2); }

Â  Â  Â  Â  .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; padding: 20px; background: rgba(255,255,255,0.7); backdrop-filter: var(--glass); border-top: 1px solid var(--border); display: flex; justify-content: center; z-index: 900; }
Â  Â  Â  Â  [data-theme="dark"] .bottom-nav { background: rgba(15, 23, 42, 0.7); }
Â  Â  Â  Â  .btn-continue { width: 100%; max-width: 600px; height: 65px; border-radius: 35px; background: var(--text); color: var(--bg); border: none; font-size: 1.1rem; font-weight: 800; letter-spacing: 1px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; padding: 0 35px; box-shadow: 0 15px 30px rgba(0,0,0,0.15); transition: 0.3s; }
Â  Â  Â  Â  .btn-continue:disabled { opacity: 0.5; cursor: not-allowed; }

Â  Â  Â  Â  .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(8px); z-index: 1100; opacity: 0; pointer-events: none; transition: 0.3s; display: flex; align-items: center; justify-content: center; }
Â  Â  Â  Â  .modal-overlay.active { opacity: 1; pointer-events: auto; }
Â  Â  Â  Â  .modal-card { width: 90%; max-width: 600px; max-height: 85vh; background: var(--bg); border-radius: 24px; padding: 30px; transform: scale(0.9); opacity: 0; transition: 0.3s cubic-bezier(0.16, 1, 0.3, 1); overflow-y: auto; border: 1px solid var(--border); }
Â  Â  Â  Â  .modal-overlay.active .modal-card { transform: scale(1); opacity: 1; }
Â  Â  Â  Â  .btn-close { width: 40px; height: 40px; border-radius: 50%; background: var(--border); border: none; font-size: 1.5rem; cursor: pointer; color: var(--text); display: flex; align-items: center; justify-content: center; float: right; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .taste-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 30px; }
Â  Â  Â  Â  .taste-chip { padding: 18px; border-radius: 16px; background: var(--surface); border: 2px solid var(--border); text-align: center; font-weight: 700; font-size: 0.95rem; cursor: pointer; transition: 0.2s; }
Â  Â  Â  Â  .taste-chip.selected { background: var(--text); color: var(--bg); border-color: var(--text); }
Â  Â  Â  Â  .appliance-chips { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 30px; }
Â  Â  Â  Â  .app-chip { padding: 10px 18px; background: var(--surface); border: 1px solid var(--border); border-radius: 12px; font-weight: 600; cursor: pointer; font-size: 0.9rem; }
Â  Â  Â  Â  .app-chip.selected { background: var(--text); color: var(--bg); }
Â  Â  Â  Â  .btn-generate { width: 100%; padding: 22px; border-radius: 18px; border: none; margin-bottom: 12px; font-size: 1.1rem; font-weight: 800; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; transition: 0.2s; }
Â  Â  Â  Â  .btn-gen-gourmet { background: var(--accent); color: white; }
Â  Â  Â  Â  .btn-gen-easy { background: var(--surface); color: var(--text); border: 2px solid var(--border); }

Â  Â  Â  Â  .filters { display: flex; flex-wrap: wrap; gap: 10px; width: 100%; margin-top: 10px; margin-bottom: 30px; }
Â  Â  Â  Â  .filter-chip { padding: 10px 18px; border-radius: 14px; background: var(--input-bg); color: var(--sub-text); font-size: 0.9rem; cursor: pointer; border: 1px solid var(--border); transition: 0.2s; font-weight: 600; }
Â  Â  Â  Â  .filter-chip.selected { background: var(--text); color: var(--bg); border-color: var(--text); }
Â  Â  Â  Â  .custom-diet-input { border: 1px dashed var(--sub-text); background: transparent; color: var(--text); padding: 10px 16px; border-radius: 14px; font-family: var(--font); font-size: 0.9rem; outline: none; width: 100px; transition: 0.3s; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .calc-box { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); padding: 20px 25px; margin-top: 30px; display: flex; justify-content: space-between; align-items: center; width: 100%; }
Â  Â  Â  Â  .counter { display: flex; align-items: center; gap: 15px; }
Â  Â  Â  Â  .count-btn { width: 35px; height: 35px; border-radius: 50%; background: var(--bg); border: 1px solid var(--border); display: flex; align-items: center; justify-content: center; font-size: 1.2rem; cursor: pointer; color: var(--text); }
Â  Â  Â  Â  .count-val { font-size: 1.4rem; font-weight: 800; min-width: 30px; text-align: center; }
Â  Â  Â  Â  .tips-box { margin-top: 20px; width: 100%; padding: 15px; border-radius: 16px; background: linear-gradient(135deg, #FF4500, #FF8C00); color: white; text-align: center; font-size: 0.95rem; line-height: 1.5; font-style: italic; box-shadow: var(--shadow); }

Â  Â  Â  Â  @keyframes pop { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
Â  Â  Â  Â  @keyframes fadeIn { 0% { opacity: 0; transform: translateY(10px); } 100% { opacity: 1; transform: translateY(0); } }
Â  Â  Â  Â  @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
Â  Â  </style>
</head>
<body>

Â  Â  <header>
Â  Â  Â  Â  <div class="logo-group" onclick="goHome()">
Â  Â  Â  Â  Â  Â  <div class="logo">AMT<span>.</span></div>
Â  Â  Â  Â  Â  Â  <div class="logo-sub">Action â€¢ Method â€¢ Technique</div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="header-actions">
Â  Â  Â  Â  Â  Â  <button class="icon-btn" onclick="toggleTheme()">â—‘</button>
Â  Â  Â  Â  </div>
Â  Â  </header>

Â  Â  <div class="loader-screen" id="loader-screen">
Â  Â  Â  Â  <span class="spinner">ğŸ¥˜</span>
Â  Â  Â  Â  <h2 id="loader-text" style="font-family: var(--font-head);">Ğ‘Ğ¾Ğ´Ğ¾Ğ¶ Ğ±Ğ°Ğ¹Ğ½Ğ°...</h2>
Â  Â  Â  Â  <p style="color:var(--sub-text); margin-top:10px;">Ğ¢Ò¯Ñ€ Ñ…Ò¯Ğ»ÑÑĞ½Ñ Ò¯Ò¯</p>
Â  Â  </div>

Â  Â  <main id="view-home" class="view-section active">
Â  Â  Â  Â  <div class="hero">
Â  Â  Â  Â  Â  Â  <h1>Ğ¢Ğ°Ğ½Ğ´ ÑÑƒ Ğ±Ğ°Ğ¹Ğ½Ğ°?</h1>
Â  Â  Â  Â  Â  Â  <p>Ğ¥Ó©Ñ€Ğ³Ó©Ğ³Ñ‡Ğ¸Ğ½Ğ´ Ğ±Ğ°Ğ¹Ğ³Ğ°Ğ° Ğ¾Ñ€Ñ†Ğ¾Ğ¾ Ğ¾Ñ€ÑƒÑƒĞ»Ğ°Ğ°Ğ´, Ğ¼ÑÑ€Ğ³ÑĞ¶Ğ»Ğ¸Ğ¹Ğ½ Ğ¶Ğ¾Ñ€ Ğ°Ğ²Ğ°Ğ°Ñ€Ğ°Ğ¹.</p>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="input-wrapper">
Â  Â  Â  Â  Â  Â  <input type="text" id="main-input" class="main-input" placeholder="Ó¨Ğ½Ğ´Ó©Ğ³, ĞœĞ°Ñ…, Ğ¢Ó©Ğ¼Ñ..." onkeypress="handleEnter(event)">
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="tags-area" id="tags-area"></div>

Â  Â  Â  Â  <span class="section-label">ğŸ½ï¸ Ğ¥Ğ¾Ğ¾Ğ»Ğ½Ñ‹ Ñ‚Ó©Ñ€Ó©Ğ» (Max 3)</span>
Â  Â  Â  Â  <div class="style-grid" id="style-grid"></div>

Â  Â  Â  Â  <span class="section-label">ğŸ‘¨â€ğŸ³ Ğ¥Ğ¾Ğ¾Ğ» Ñ…Ğ¸Ğ¹Ñ… Ñ‡Ğ°Ğ´Ğ²Ğ°Ñ€</span>
Â  Â  Â  Â  <div class="level-bar">
Â  Â  Â  Â  Â  Â  <div class="lvl-step" onclick="setLevel(1)" id="lvl-1"><span class="lvl-emoji">ğŸ£</span><span class="lvl-label">ĞĞ½Ñ…Ğ°Ğ½</span></div>
Â  Â  Â  Â  Â  Â  <div class="lvl-step" onclick="setLevel(2)" id="lvl-2"><span class="lvl-emoji">ğŸ³</span><span class="lvl-label">Ğ¡ÑƒÑ€Ğ°Ğ³Ñ‡</span></div>
Â  Â  Â  Â  Â  Â  <div class="lvl-step active" onclick="setLevel(3)" id="lvl-3"><span class="lvl-emoji">ğŸ²</span><span class="lvl-label">Ğ”ÑƒĞ½Ğ´Ğ°Ğ¶</span></div>
Â  Â  Â  Â  Â  Â  <div class="lvl-step" onclick="setLevel(4)" id="lvl-4"><span class="lvl-emoji">ğŸ”ª</span><span class="lvl-label">Ğ¡Ğ°Ğ¹Ğ½</span></div>
Â  Â  Â  Â  Â  Â  <div class="lvl-step" onclick="setLevel(5)" id="lvl-5"><span class="lvl-emoji">ğŸ‘¨â€ğŸ³</span><span class="lvl-label">Pro</span></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <span class="section-label">ğŸ¥« Ğ“ÑÑ€Ğ¸Ğ¹Ğ½ Ğ½Ó©Ó©Ñ†</span>
Â  Â  Â  Â  <div class="level-bar" style="margin-bottom:10px;">
Â  Â  Â  Â  Â  Â  <div class="lvl-step" onclick="setPantryLvl(1)" id="pl-1"><span class="lvl-emoji">ğŸ§‚</span><span class="lvl-label">Ğ¦Ó©Ó©Ğ½</span></div>
Â  Â  Â  Â  Â  Â  <div class="lvl-step active" onclick="setPantryLvl(2)" id="pl-2"><span class="lvl-emoji">ğŸ§…</span><span class="lvl-label">Ğ”ÑƒĞ½Ğ´Ğ°Ğ¶</span></div>
Â  Â  Â  Â  Â  Â  <div class="lvl-step" onclick="setPantryLvl(3)" id="pl-3"><span class="lvl-emoji">ğŸ¥«</span><span class="lvl-label">Ğ˜Ñ…</span></div>
Â  Â  Â  Â  Â  Â  <div class="lvl-step" onclick="setPantryLvl(4)" id="pl-4"><span class="lvl-emoji">ğŸŒ¶ï¸</span><span class="lvl-label">ĞÑĞ¼ÑĞ»Ñ‚</span></div>
Â  Â  Â  Â  Â  Â  <div class="lvl-step" onclick="setPantryLvl(5)" id="pl-5"><span class="lvl-emoji">ğŸ†</span><span class="lvl-label">Ğ‘Ò¯Ñ€ÑĞ½</span></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="pantry-box">
Â  Â  Â  Â  Â  Â  <div class="pantry-header">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="pantry-title">Ğ˜Ğ´ÑĞ²Ñ…Ñ‚ÑĞ¹ Ğ°Ğ¼Ñ‚Ğ»Ğ°Ğ³Ñ‡ÑƒÑƒĞ´</span>
Â  Â  Â  Â  Â  Â  Â  Â  <label class="switch">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="checkbox" id="pantry-switch" checked onchange="togglePantry()">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="slider"></span>
Â  Â  Â  Â  Â  Â  Â  Â  </label>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="pantry-content" id="pantry-content">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="pantry-chips-grid" id="pantry-chips-area"></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="filters" id="dietary-filters">
Â  Â  Â  Â  Â  Â  <div class="filter-chip" onclick="toggleFilter(this, 'Ğ¡Ğ°Ğ¼Ğ°Ñ€ Ğ¾Ñ€Ğ¾Ğ¾Ğ³Ò¯Ğ¹')">ğŸ¥œ Ğ¡Ğ°Ğ¼Ğ°Ñ€</div>
Â  Â  Â  Â  Â  Â  <div class="filter-chip" onclick="toggleFilter(this, 'Ğ“Ğ°Ñ…Ğ°Ğ¹Ğ½ Ğ¼Ğ°Ñ…Ğ³Ò¯Ğ¹')">ğŸ· Ğ“Ğ°Ñ…Ğ°Ğ¹Ğ½ Ğ¼Ğ°Ñ…</div>
Â  Â  Â  Â  Â  Â  <div class="filter-chip" onclick="toggleFilter(this, 'Ğ¡Ò¯Ò¯Ğ³Ò¯Ğ¹')">ğŸ¥› Ğ¡Ò¯Ò¯</div>
Â  Â  Â  Â  Â  Â  <div class="filter-chip" onclick="toggleFilter(this, 'Ğ¡Ğ°Ñ…Ğ°Ñ€Ğ³Ò¯Ğ¹')">ğŸ¬ Ğ¡Ğ°Ñ…Ğ°Ñ€</div>
Â  Â  Â  Â  Â  Â  <div class="filter-chip" onclick="toggleFilter(this, 'Ğ¥Ğ°Ğ»ÑƒÑƒĞ½ Ğ½Ğ¾Ğ³Ğ¾Ğ¾Ğ³Ò¯Ğ¹')">ğŸŒ¶ï¸ Ğ¥Ğ°Ğ»ÑƒÑƒĞ½ Ğ½Ğ¾Ğ³Ğ¾Ğ¾</div>
Â  Â  Â  Â  Â  Â  <input type="text" class="custom-diet-input" placeholder="+ Ğ‘ÑƒÑĞ°Ğ´" onkeypress="handleCustomDiet(event)">
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="calc-box">
Â  Â  Â  Â  Â  Â  <span class="calc-title">Ğ¥Ò®ĞĞ˜Ğ™ Ğ¢ĞĞ</span>
Â  Â  Â  Â  Â  Â  <div class="counter">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="count-btn" onclick="updServ(-1)">âˆ’</button>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="count-val" id="serv-val">2</span>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="count-btn" onclick="updServ(1)">+</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="tips-box" id="daily-tip">Ğ—Ó©Ğ²Ğ»Ó©Ğ³Ó©Ó©...</div>
Â  Â  </main>

Â  Â  <main id="view-list" class="view-section">
Â  Â  Â  Â  <button class="back-btn" onclick="goHome()">â† Ğ‘ÑƒÑ†Ğ°Ñ…</button>
Â  Â  Â  Â  <div class="hero">
Â  Â  Â  Â  Â  Â  <h1>Ğ˜Ğ¹Ğ¼ ÑĞ¾Ğ½Ğ³Ğ¾Ğ»Ñ‚ÑƒÑƒĞ´ Ğ±Ğ°Ğ¹Ğ½Ğ°</h1>
Â  Â  Â  Â  Â  Â  <p>Ğ¢Ğ° Ğ°Ğ»ÑŒ Ñ…Ğ¾Ğ¾Ğ»Ñ‹Ğ³ Ğ½ÑŒ Ñ…Ğ¸Ğ¹Ğ¼ÑÑÑ€ Ğ±Ğ°Ğ¹Ğ½Ğ°?</p>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div id="recipe-list-container"></div>
Â  Â  </main>

Â  Â  <main id="view-detail" class="view-section">
Â  Â  Â  Â  <button class="back-btn" onclick="goBackToList()">â† Ğ¡Ğ¾Ğ½Ğ³Ğ¾Ğ»Ñ‚ Ñ€ÑƒÑƒ Ğ±ÑƒÑ†Ğ°Ñ…</button>
Â  Â  Â  Â  <div id="detail-container"></div>
Â  Â  </main>

Â  Â  <div class="bottom-nav" id="bottom-nav">
Â  Â  Â  Â  <button id="analyze-btn" class="btn-continue" onclick="openSettings()" disabled>
Â  Â  Â  Â  Â  Â  <span>Ò®Ğ Ğ“Ğ­Ğ›Ğ–Ğ›Ò®Ò®Ğ›Ğ­Ğ¥</span>
Â  Â  Â  Â  Â  Â  <span>â†’</span>
Â  Â  Â  Â  </button>
Â  Â  </div>

Â  Â  <div class="modal-overlay" id="modal-overlay" onclick="closeSettings(event)">
Â  Â  Â  Â  <div class="modal-card" id="settings-modal" onclick="event.stopPropagation()">
Â  Â  Â  Â  Â  Â  <button class="btn-close" onclick="closeSettings()">&times;</button>
Â  Â  Â  Â  Â  Â  <h2 class="modal-title" style="margin-bottom:20px;">Ğ­Ñ†ÑĞ¸Ğ¹Ğ½ Ğ¢Ğ¾Ñ…Ğ¸Ñ€Ğ³Ğ¾Ğ¾</h2>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <span class="section-label" style="margin-top:0;">ĞĞœĞ¢ĞĞ« Ğ¢Ó¨Ğ Ó¨Ğ›</span>
Â  Â  Â  Â  Â  Â  <div class="taste-grid" id="taste-grid"></div>

Â  Â  Â  Â  Â  Â  <span class="section-label">Ğ¢Ó¨Ğ¥Ó¨Ó¨Ğ Ó¨ĞœĞ–</span>
Â  Â  Â  Â  Â  Â  <div class="appliance-chips" id="appliance-area"></div>

Â  Â  Â  Â  Â  Â  <div style="margin-top:30px;">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn-generate btn-gen-gourmet" onclick="generateList('gourmet')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>âœ¨ 5 Ğ¢Ğ°Ğ½ÑĞ°Ğ³ Ğ–Ğ¾Ñ€</span>
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn-generate btn-gen-easy" onclick="generateList('easy')">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>âš¡ 5 Ğ¥ÑƒÑ€Ğ´Ğ°Ğ½ Ğ–Ğ¾Ñ€</span>
Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  // --- DATA ---
Â  Â  Â  Â  const pantryData = [
Â  Â  Â  Â  Â  Â  ["Ğ”Ğ°Ğ²Ñ", "Ğ¥Ğ°Ñ€ Ğ¿ĞµÑ€Ñ†", "Ğ£Ñ€Ğ³Ğ°Ğ¼Ğ»Ñ‹Ğ½ Ñ‚Ğ¾Ñ"],Â 
Â  Â  Â  Â  Â  Â  ["Ğ¡Ğ¾Ğ½Ğ³Ğ¸Ğ½Ğ¾", "Ğ¡Ğ°Ñ€Ğ¼Ğ¸Ñ", "Ğ“ÑƒÑ€Ğ¸Ğ»", "Ğ¦Ğ°Ğ³Ğ°Ğ°Ğ½ Ğ±ÑƒĞ´Ğ°Ğ°", "Ğ¡Ğ¾Ñ ÑĞ¾ÑƒÑ"],
Â  Â  Â  Â  Â  Â  ["Ğ­Ğ»ÑÑĞ½ Ñ‡Ğ¸Ñ…ÑÑ€", "Ğ£ĞºÑÑƒÑ", "Ğ›Ğ°Ğ²Ñ€Ñ‹Ğ½ Ğ½Ğ°Ğ²Ñ‡", "Ğ¦Ó©Ñ†Ğ³Ğ¸Ğ¹Ğ½ Ñ‚Ğ¾Ñ"],
Â  Â  Â  Â  Â  Â  ["ĞšĞµÑ‚Ñ‡ÑƒĞ¿", "ĞœĞ°Ğ¹Ğ¾Ğ½ĞµĞ·", "Ğ¢Ğ¾Ğ¼Ğ°Ñ‚ Ğ¿Ğ°ÑÑ‚", "Ğ“Ğ¸Ñ‡", "Ğ¡Ğ¾Ğ´"],
Â  Â  Â  Â  Â  Â  ["Ğ“ÑƒÑ€Ğ²Ğ°Ğ»Ğ¶Ğ¸Ğ½ Ğ±ÑƒĞ´Ğ°Ğ°", "Ğ“Ğ¾Ğ¹Ğ¼Ğ¾Ğ½", "Ğ¦Ğ°Ñ€Ğ´ÑƒÑƒĞ»", "Ğ¥ÑƒÑƒÑ€Ğ°Ğ¹ ÑÒ¯Ò¯", "Ğ“Ò¯Ğ½Ğ¶Ğ¸Ğ´"]
Â  Â  Â  Â  ];
Â  Â  Â  Â  const styles = [ {n:"Ğ¢Ğ¾Ğ³Ğ¾Ğ¾Ñ‡", e:"ğŸ‘¨â€ğŸ³"}, {n:"ĞœĞ¾Ğ½Ğ³Ğ¾Ğ»", e:"ğŸ‡²ğŸ‡³"}, {n:"ĞĞ·Ğ¸", e:"ğŸ¥¢"}, {n:"Ğ˜Ñ‚Ğ°Ğ»Ğ¸", e:"ğŸ"}, {n:"Ğ¤Ñ€Ğ°Ğ½Ñ†", e:"ğŸ¥"}, {n:"Ğ¨Ó©Ğ»", e:"ğŸ²"}, {n:"Ó¨Ğ³Ğ»Ó©Ó©Ğ½Ğ¸Ğ¹", e:"ğŸ³"}, {n:"Ğ­Ñ€Ò¯Ò¯Ğ»", e:"ğŸ¥—"}, {n:"Ğ¢Ò¯Ñ€Ğ³ÑĞ½", e:"ğŸ”"}, {n:"Ğ¦Ğ°Ğ³Ğ°Ğ°Ğ½ Ñ…Ğ¾Ğ¾Ğ»", e:"ğŸ¥¬"}];
Â  Â  Â  Â  const tastes = ["Ğ¥ÑĞ²Ğ¸Ğ¹Ğ½", "Ğ—Ó©Ó©Ğ»Ó©Ğ½", "Ğ¥Ğ°Ğ»ÑƒÑƒĞ½ Ğ½Ğ¾Ğ³Ğ¾Ğ¾Ñ‚Ğ¾Ğ¹", "Ğ‘Ğ°ÑĞ»Ğ°Ğ³/Umami", "Ğ§Ğ¸Ñ…ÑÑ€Ğ»ÑĞ³", "Ğ˜ÑĞ³ÑĞ»ÑĞ½"];
Â  Â  Â  Â  const appliances = ["ĞŸĞ»ĞµÑ‚ĞºĞ°", "Ğ¨Ğ°Ñ€Ğ°Ñ… ÑˆÒ¯Ò¯Ğ³ÑÑ", "Air Fryer", "Ğ‘Ğ¸Ñ‚Ò¯Ò¯ Ñ‡Ğ°Ğ½Ğ°Ğ³Ñ‡", "ĞĞ³ÑˆĞ°Ğ°Ğ³Ñ‡", "Ğ‘Ğ»ĞµĞ½Ğ´ĞµÑ€"];
Â  Â  Â  Â  const lvlNames = ["ĞĞ½Ñ…Ğ°Ğ½", "Ğ¡ÑƒÑ€Ğ°Ğ³Ñ‡", "Ğ”ÑƒĞ½Ğ´Ğ°Ğ¶", "Ğ¡Ğ°Ğ¹Ğ½", "Pro"];
Â  Â  Â  Â Â 
Â  Â  Â  Â  let state = { ings: [], styles: [], skill: 3, pantryLvl: 2, pantryActiveItems: [], apps: [], diet: [], servings: 2, selectedTastes: ['Ğ¥ÑĞ²Ğ¸Ğ¹Ğ½'] };

Â  Â  Â  Â  window.onload = () => {
Â  Â  Â  Â  Â  Â  if(localStorage.getItem('theme') === 'dark') document.body.setAttribute('data-theme', 'dark');
Â  Â  Â  Â  Â  Â  loadPantry(2); renderUI(); randomTip();
Â  Â  Â  Â  };

Â  Â  Â  Â  function renderUI() {
Â  Â  Â  Â  Â  Â  document.getElementById('style-grid').innerHTML = styles.map(s => `<div class="style-chip ${state.styles.includes(s.n) ? 'selected' : ''}" onclick="toggleStyle('${s.n}')"><span class="style-emoji">${s.e}</span><span class="style-name">${s.n}</span></div>`).join('');
Â  Â  Â  Â  Â  Â  document.getElementById('taste-grid').innerHTML = tastes.map(v => `<div class="taste-chip ${state.selectedTastes.includes(v) ? 'selected' : ''}" onclick="setTaste('${v}')">${v}</div>`).join('');
Â  Â  Â  Â  Â  Â  document.getElementById('appliance-area').innerHTML = appliances.map(a => `<div class="app-chip ${state.apps.includes(a) ? 'selected' : ''}" onclick="toggleApp('${a}')">${a}</div>`).join('');
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- CORE LOGIC ---
Â  Â  Â  Â  function handleEnter(e) { if(e.key === 'Enter' && e.target.value) { addIng(e.target.value); e.target.value=''; } }
Â  Â  Â  Â  function addIng(val) { val = val.charAt(0).toUpperCase() + val.slice(1); if(!state.ings.includes(val)) state.ings.push(val); renderTags(); }
Â  Â  Â  Â  function removeIng(val) { state.ings = state.ings.filter(x => x !== val); renderTags(); }
Â  Â  Â  Â  function renderTags() {
Â  Â  Â  Â  Â  Â  document.getElementById('tags-area').innerHTML = state.ings.map(x => `<div class="tag">${x}<span onclick="removeIng('${x}')" style="cursor:pointer;margin-left:5px;">&times;</span></div>`).join('');
Â  Â  Â  Â  Â  Â  const btn = document.getElementById('analyze-btn');
Â  Â  Â  Â  Â  Â  if(state.ings.length > 0) { btn.disabled = false; btn.style.opacity = 1; } else { btn.disabled = true; btn.style.opacity = 0.5; }
Â  Â  Â  Â  }

Â  Â  Â  Â  function toggleStyle(val) { if(state.styles.includes(val)) state.styles = state.styles.filter(x => x !== val); else if(state.styles.length < 3) state.styles.push(val); renderUI(); }
Â  Â  Â  Â  function setLevel(l) { state.skill = l; document.querySelectorAll('.level-bar .lvl-step').forEach((el, i) => i+1 === l ? el.classList.add('active') : el.classList.remove('active')); }
Â  Â  Â  Â  function setPantryLvl(l) { state.pantryLvl = l; for(let i=1; i<=5; i++) { document.getElementById('pl-'+i).classList.toggle('active', i===l); } loadPantry(l); }
Â  Â  Â  Â  function loadPantry(lvl) { let items = []; for(let i=0; i<lvl; i++) items = items.concat(pantryData[i]); state.pantryActiveItems = [...new Set(items)]; renderPantryChips(); }
Â  Â  Â  Â  function renderPantryChips() { document.getElementById('pantry-chips-area').innerHTML = state.pantryActiveItems.map(item => `<div class="p-chip active" onclick="this.classList.toggle('active')">${item}</div>`).join(''); }
Â  Â  Â  Â  function togglePantry() { document.getElementById('pantry-content').classList.toggle('disabled', !document.getElementById('pantry-switch').checked); }
Â  Â  Â  Â  function toggleFilter(el, type) { if(state.diet.includes(type)) { state.diet = state.diet.filter(d => d !== type); el.classList.remove('selected'); } else { state.diet.push(type); el.classList.add('selected'); } }
Â  Â  Â  Â  function handleCustomDiet(e) { if (e.key === 'Enter' && e.target.value.trim()) { state.diet.push(e.target.value.trim()); e.target.value = ''; alert("ĞÑĞ¼ÑĞ³Ğ´Ğ»ÑÑ"); } }
Â  Â  Â  Â  function updServ(n) { state.servings = Math.max(1, state.servings + n); document.getElementById('serv-val').innerText = state.servings; }
Â  Â  Â  Â  function toggleApp(val) { state.apps.includes(val) ? state.apps = state.apps.filter(x=>x!==val) : state.apps.push(val); renderUI(); }
Â  Â  Â  Â  function setTaste(val) { if (state.selectedTastes.includes(val)) state.selectedTastes = state.selectedTastes.filter(t => t !== val); else if (state.selectedTastes.length < 2) state.selectedTastes.push(val); renderUI(); }
Â  Â  Â  Â  function randomTip() { const tips = ["ĞœĞ°Ñ…Ğ°Ğ° ÑˆĞ°Ñ€Ğ°Ñ…Ñ‹Ğ½ Ó©Ğ¼Ğ½Ó© Ñ‚Ğ°ÑĞ°Ğ»Ğ³Ğ°Ğ°Ğ½Ñ‹ Ñ…ÑĞ¼Ğ´ 20 Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ±Ğ°Ğ¹Ğ»Ğ³Ğ°Ğ²Ğ°Ğ» ÑˆÒ¯Ò¯ÑĞ»ÑĞ³ Ğ±Ğ¾Ğ»Ğ´Ğ¾Ğ³.", "Ğ“Ğ¾Ğ¹Ğ¼Ğ¾Ğ½ Ñ‡Ğ°Ğ½Ğ°Ñ…Ğ´Ğ°Ğ° ÑƒÑĞ°Ğ½Ğ´Ğ°Ğ° Ğ´Ğ°Ğ²Ñ Ñ…Ğ°Ğ½Ğ³Ğ°Ğ»Ñ‚Ñ‚Ğ°Ğ¹ Ñ…Ğ¸Ğ¹Ğ²ÑĞ» Ğ°Ğ¼Ñ‚ Ğ½ÑŒ Ğ¸Ğ»Ò¯Ò¯ Ñ‚Ğ¾Ğ´Ğ¾Ñ€Ğ½Ğ¾."]; document.getElementById('daily-tip').innerText = "ğŸ’¡ " + tips[Math.floor(Math.random()*tips.length)]; }
Â  Â  Â  Â  function toggleTheme() { const d = document.body.getAttribute('data-theme') === 'dark'; document.body.setAttribute('data-theme', d ? 'light' : 'dark'); localStorage.setItem('theme', d ? 'light' : 'dark'); }
Â  Â  Â  Â  function openSettings() { document.getElementById('modal-overlay').classList.add('active'); document.getElementById('settings-modal').classList.add('active'); }
Â  Â  Â  Â  function closeSettings(e) { if (e && e.target !== e.currentTarget) return; document.getElementById('modal-overlay').classList.remove('active'); document.getElementById('settings-modal').classList.remove('active'); }

Â  Â  Â  Â  // --- NAVIGATION ---
Â  Â  Â  Â  function switchView(viewId) {
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
Â  Â  Â  Â  Â  Â  document.getElementById(viewId).classList.add('active');
Â  Â  Â  Â  Â  Â  // Hide bottom nav if not home
Â  Â  Â  Â  Â  Â  document.getElementById('bottom-nav').style.display = (viewId === 'view-home') ? 'flex' : 'none';
Â  Â  Â  Â  Â  Â  window.scrollTo(0,0);
Â  Â  Â  Â  }
Â  Â  Â  Â  function goHome() { switchView('view-home'); }
Â  Â  Â  Â  function goBackToList() { switchView('view-list'); }

Â  Â  Â  Â  // --- API PHASE 1: GENERATE LIST ---
Â  Â  Â  Â  async function generateList(mode) {
Â  Â  Â  Â  Â  Â  closeSettings();
Â  Â  Â  Â  Â  Â  document.getElementById('loader-text').innerText = "Ğ¦ÑÑ Ğ±Ğ¾Ğ»Ğ¾Ğ²ÑÑ€ÑƒÑƒĞ»Ğ¶ Ğ±Ğ°Ğ¹Ğ½Ğ°...";
Â  Â  Â  Â  Â  Â  document.getElementById('loader-screen').classList.add('active');

Â  Â  Â  Â  Â  Â  let activePantry = [];
Â  Â  Â  Â  Â  Â  if(document.getElementById('pantry-switch').checked) {
Â  Â  Â  Â  Â  Â  Â  Â  document.querySelectorAll('.p-chip.active').forEach(c => activePantry.push(c.innerText));
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // Prompt specifically asks for JSON Array
Â  Â  Â  Â  Â  Â  const promptText = `
Â  Â  Â  Â  Â  Â  Role: Pro Chef. Language: MONGOLIAN.
Â  Â  Â  Â  Â  Â  Context: Create 5 distinct recipe ideas based on these inputs:
Â  Â  Â  Â  Â  Â  - Main Ingredients: ${state.ings.join(', ')}
Â  Â  Â  Â  Â  Â  - Pantry Access: ${activePantry.join(', ')}
Â  Â  Â  Â  Â  Â  - Cuisine Style: ${state.styles.join(', ') || "Mix"}
Â  Â  Â  Â  Â  Â  - Dietary: ${state.diet.join(', ')}
Â  Â  Â  Â  Â  Â  - User Skill Level: ${lvlNames[state.skill-1]}Â 
Â  Â  Â  Â  Â  Â  - Mood: ${mode === 'easy' ? 'Very Quick & Easy' : 'Gourmet & Impressive'}
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  OUTPUT FORMAT: STRICT JSON ARRAY. Do not use Markdown. Do not include 'json' tag.
Â  Â  Â  Â  Â  Â  Example: [{"title": "Recipe Name", "desc": "Short appetizing description in 1 sentence."}]
Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch('/api/generate', {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ prompt: promptText })
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  const data = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (data.candidates && data.candidates[0].content) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let raw = data.candidates[0].content.parts[0].text;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Clean up markdown if AI adds it
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  raw = raw.replace(/```json/g, '').replace(/```/g, '').trim();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const recipes = JSON.parse(raw);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderRecipeList(recipes);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  switchView('view-list');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error(err);
Â  Â  Â  Â  Â  Â  Â  Â  alert("ĞĞ»Ğ´Ğ°Ğ° Ğ³Ğ°Ñ€Ğ»Ğ°Ğ°. Ğ”Ğ°Ñ…Ğ¸Ğ½ Ğ¾Ñ€Ğ¾Ğ»Ğ´Ğ¾Ğ½Ğ¾ ÑƒÑƒ.");
Â  Â  Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('loader-screen').classList.remove('active');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function renderRecipeList(recipes) {
Â  Â  Â  Â  Â  Â  const container = document.getElementById('recipe-list-container');
Â  Â  Â  Â  Â  Â  container.innerHTML = '';
Â  Â  Â  Â  Â  Â  recipes.forEach(r => {
Â  Â  Â  Â  Â  Â  Â  Â  const card = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  card.className = 'recipe-card';
Â  Â  Â  Â  Â  Â  Â  Â  card.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rc-title">${r.title}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rc-desc">${r.desc}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="rc-arrow">â†’</div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  // Add click event to fetch details for THIS recipe
Â  Â  Â  Â  Â  Â  Â  Â  card.onclick = () => getFullRecipe(r.title);
Â  Â  Â  Â  Â  Â  Â  Â  container.appendChild(card);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- API PHASE 2: GET DETAILS ---
Â  Â  Â  Â  async function getFullRecipe(title) {
Â  Â  Â  Â  Â  Â  document.getElementById('loader-text').innerText = "Ğ–Ğ¾Ñ€Ñ‹Ğ³ Ğ½Ğ°Ñ€Ğ¸Ğ¹Ğ²Ñ‡Ğ¸Ğ»Ğ¶ Ğ±Ğ°Ğ¹Ğ½Ğ°...";
Â  Â  Â  Â  Â  Â  document.getElementById('loader-screen').classList.add('active');

Â  Â  Â  Â  Â  Â  // --- SKILL LEVEL LOGIC INJECTED HERE ---
Â  Â  Â  Â  Â  Â  const skillName = lvlNames[state.skill-1];
Â  Â  Â  Â  Â  Â  let instructionStyle = "";
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (state.skill <= 2) {
Â  Â  Â  Â  Â  Â  Â  Â  instructionStyle = "EXPLAIN LIKE I'M 5. Use visual size comparisons (e.g., 'size of a tennis ball'). Avoid technical jargon.";
Â  Â  Â  Â  Â  Â  } else if (state.skill === 5) {
Â  Â  Â  Â  Â  Â  Â  Â  instructionStyle = "PROFESSIONAL CHEF. Use proper culinary terms (e.g., 'julienne', 'sear', 'deglaze').";
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  instructionStyle = "STANDARD home cook instructions.";
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const promptText = `
Â  Â  Â  Â  Â  Â  Role: Cooking Instructor. Language: MONGOLIAN.
Â  Â  Â  Â  Â  Â  Task: Create a detailed guide for the recipe: "${title}".
Â  Â  Â  Â  Â  Â  User Skill Level: ${skillName}.
Â  Â  Â  Â  Â  Â  Instruction Style: ${instructionStyle}
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  REQUIREMENTS:
Â  Â  Â  Â  Â  Â  1. INGREDIENTS: List precise quantities.
Â  Â  Â  Â  Â  Â  2. PREP: List equipment needed.
Â  Â  Â  Â  Â  Â  3. STEPS: Granular, numbered steps matching the skill level.
Â  Â  Â  Â  Â  Â  4. TIMING: Exact minutes for every step.
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  FORMAT: HTML (Use <h3> for sections, <ul>/<li> for lists, <strong> for emphasis). NO Markdown.
Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch('/api/generate', {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ prompt: promptText })
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  const data = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (data.candidates && data.candidates[0].content) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  let html = data.candidates[0].content.parts[0].text;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  html = html.replace(/```html/g, '').replace(/```/g, '');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('detail-container').innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="detail-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h1 class="detail-title">${title}</h1>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="detail-content">${html}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  switchView('view-detail');
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error(err);
Â  Â  Â  Â  Â  Â  Â  Â  alert("Ğ–Ğ¾Ñ€Ñ‹Ğ³ Ğ°Ñ‡Ğ°Ğ°Ğ»Ğ¶ Ñ‡Ğ°Ğ´ÑĞ°Ğ½Ğ³Ò¯Ğ¹.");
Â  Â  Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('loader-screen').classList.remove('active');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  </script>
</body>
</html>
