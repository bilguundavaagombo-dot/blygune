<!DOCTYPE html>
<html lang="mn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Монгол Чеф - Гараар Бүтээх</title>
    <link href="https://fonts.googleapis.com/css2?family=Frank+Ruhl+Libre:wght@400;500;700&family=Public+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --nyt-red: #E32400;
            --nyt-black: #121212;
            --nyt-gray: #f7f7f7;
            --gemini-blue: #4E86F5;
            --border-color: #ddd;
            --font-serif: 'Frank Ruhl Libre', serif;
            --font-sans: 'Public Sans', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body { 
            background-color: #fff; color: var(--nyt-black); font-family: var(--font-sans);
            height: 100vh; width: 100vw; overflow: hidden; display: flex; flex-direction: column;
        }

        /* --- HEADER --- */
        header {
            height: 60px; border-bottom: 1px solid var(--border-color);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 20px; background: white; z-index: 1000; position: fixed; top: 0; width: 100%;
        }
        .logo { font-family: var(--font-serif); font-weight: 700; font-size: 1.4rem; letter-spacing: -0.5px; text-transform: uppercase; color: black; cursor: pointer; }
        .cart-count { background: var(--nyt-red); color: white; padding: 2px 8px; border-radius: 20px; font-size: 0.8rem; font-weight: bold; margin-left: 5px; }

        /* --- LAYOUT & RESPONSIVENESS --- */
        .page { 
            position: absolute; top: 60px; left: 0; width: 100%; height: calc(100% - 60px); 
            display: none; flex-direction: column; align-items: center; 
            overflow-y: auto; padding-bottom: 80px;
        }
        .active-page { display: flex !important; animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* Container for Desktop Centering */
        .container {
            width: 100%; max-width: 800px; padding: 20px; display: flex; flex-direction: column; align-items: center;
        }

        /* --- HOME PAGE --- */
        #home { justify-content: center; text-align: center; background: var(--nyt-gray); }
        .hero-content { margin-top: 5vh; }
        .daily-pick { font-weight: 700; font-size: 0.8rem; letter-spacing: 1px; color: var(--nyt-red); text-transform: uppercase; margin-bottom: 15px; }
        .hero-title { font-family: var(--font-serif); font-size: clamp(2.5rem, 5vw, 4rem); line-height: 1.1; margin-bottom: 20px; color: var(--nyt-black); }
        .hero-desc { font-size: 1.1rem; line-height: 1.6; color: #555; margin-bottom: 40px; max-width: 500px; margin-left: auto; margin-right: auto; }
        .btn-primary { 
            background-color: var(--nyt-red); color: white; border: none; 
            padding: 15px 40px; font-size: 1rem; font-weight: 700; border-radius: 4px; 
            cursor: pointer; transition: 0.2s; text-transform: uppercase; letter-spacing: 0.5px; 
            width: 100%; max-width: 300px;
        }
        .btn-primary:hover { background-color: #b01b00; }

        /* --- SELECTION / INPUT PAGE --- */
        #selection { background: white; }
        
        .controls-wrapper {
            display: flex; flex-wrap: wrap; gap: 15px; width: 100%; margin-bottom: 30px; justify-content: center;
        }

        /* Dropdown & Counter Styles */
        .control-box {
            display: flex; align-items: center; justify-content: space-between; gap: 10px;
            background: #f9f9f9; padding: 12px 20px; border-radius: 8px; border: 1px solid #eee;
            width: 100%; /* Mobile full width */
        }
        /* Desktop Adjustment */
        @media (min-width: 768px) {
            .control-box { width: auto; min-width: 200px; }
        }

        .control-label { font-size: 0.75rem; font-weight: 700; color: #888; text-transform: uppercase; letter-spacing: 1px; }
        .style-select { border: none; background: transparent; font-family: var(--font-serif); font-size: 1.1rem; font-weight: bold; outline: none; text-align: right; flex-grow: 1; cursor: pointer; }
        
        .serving-btn { width: 30px; height: 30px; border-radius: 50%; border: 1px solid #ccc; background: white; cursor: pointer; font-weight: bold; font-size: 1.2rem; display: flex; align-items: center; justify-content: center; }
        .serving-count { font-family: var(--font-serif); font-size: 1.3rem; font-weight: bold; padding: 0 15px; }

        /* Big Input Field */
        .input-wrapper { width: 100%; position: relative; margin-bottom: 20px; }
        .big-input {
            width: 100%; padding: 20px; border: 2px solid #eee; border-radius: 12px;
            font-family: var(--font-serif); font-size: 1.2rem; outline: none; transition: 0.3s;
        }
        .big-input:focus { border-color: var(--nyt-black); box-shadow: 0 5px 20px rgba(0,0,0,0.05); }
        .enter-hint { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: #aaa; font-size: 0.8rem; pointer-events: none; display: none; }
        @media (min-width: 768px) { .enter-hint { display: block; } }

        /* Added Ingredients List (Chips) */
        .ingredients-display {
            display: flex; flex-wrap: wrap; gap: 10px; width: 100%; margin-top: 10px;
        }
        .ingredient-chip {
            background: #fff; border: 1px solid #ddd; padding: 8px 15px; border-radius: 50px;
            font-size: 1rem; display: flex; align-items: center; gap: 8px; animation: popIn 0.3s;
            font-family: var(--font-serif); box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .chip-remove { cursor: pointer; color: #999; font-weight: bold; font-size: 1.2rem; line-height: 1; }
        .chip-remove:hover { color: var(--nyt-red); }

        .empty-state { text-align: center; color: #aaa; width: 100%; margin-top: 40px; font-style: italic; }

        /* Action Bar (Fixed Bottom) */
        .action-bar {
            position: fixed; bottom: 0; left: 0; width: 100%; 
            background: white; border-top: 1px solid #eee; padding: 15px 20px;
            display: flex; justify-content: center; z-index: 1000;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.05);
        }
        .btn-analyze {
            background: var(--nyt-black); color: white; width: 100%; max-width: 600px;
            padding: 15px; border-radius: 50px; font-weight: bold; font-size: 1rem; border: none; cursor: pointer;
            display: flex; justify-content: space-between; align-items: center; padding: 15px 30px;
        }
        .btn-analyze:disabled { background: #ccc; cursor: not-allowed; }

        /* --- RESULT / ANALYSIS PAGE --- */
        #result-page { background: white; }
        
        .result-header { text-align: center; margin-bottom: 30px; border-bottom: 1px solid #eee; padding-bottom: 20px; width: 100%; }
        .result-sub { color: var(--nyt-red); font-weight: bold; text-transform: uppercase; font-size: 0.8rem; letter-spacing: 1px; margin-bottom: 10px; }
        .result-title { font-family: var(--font-serif); font-size: 2rem; margin-bottom: 10px; }
        
        .info-grid { 
            display: grid; grid-template-columns: 1fr; gap: 20px; width: 100%; margin-bottom: 40px; 
        }
        @media (min-width: 768px) { .info-grid { grid-template-columns: 1fr 1fr; } }

        .info-card { 
            background: #fafafa; padding: 25px; border-radius: 12px; border: 1px solid #eee; 
        }
        .info-label { font-size: 0.8rem; color: #888; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 10px; display: block; }
        .info-content { font-family: var(--font-serif); font-size: 1.2rem; color: #333; }
        .ai-badge { display: inline-block; background: #e0f0ff; color: var(--gemini-blue); font-size: 0.7rem; padding: 2px 6px; border-radius: 4px; font-weight: bold; vertical-align: middle; margin-left: 5px; font-family: var(--font-sans); }

        .gemini-box {
            background: linear-gradient(135deg, #f0f7ff, #ffffff);
            border: 2px solid var(--gemini-blue); border-radius: 16px; padding: 30px;
            text-align: center; width: 100%; margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(78, 134, 245, 0.15);
        }
        .gemini-text { font-family: var(--font-serif); font-size: 1.3rem; margin-bottom: 20px; line-height: 1.4; }
        .btn-gemini {
            background: var(--gemini-blue); color: white; border: none;
            padding: 15px 30px; border-radius: 50px; font-size: 1rem; font-weight: 700; cursor: pointer;
            display: inline-flex; align-items: center; gap: 10px; transition: 0.2s;
            box-shadow: 0 5px 15px rgba(78, 134, 245, 0.3); width: 100%; justify-content: center;
        }
        .btn-gemini:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(78, 134, 245, 0.4); }

        .start-over { color: #999; text-decoration: underline; background: none; border: none; cursor: pointer; margin-bottom: 50px; }

    </style>
</head>
<body>

    <header>
        <div class="logo" onclick="startOver()">МОНГОЛ<span style="color:var(--nyt-red);">ЧЕФ</span></div>
        <div style="font-size:0.9rem; font-weight:600;">ГАР УТАС & ВЭБ</div>
    </header>

    <div id="home" class="page active-page">
        <div class="container">
            <div class="hero-content">
                <p class="daily-pick">Бүтээлч Гал Тогоо</p>
                <h1 class="hero-title">Танд юу байна, <br>Түүгээр жор бүтээе</h1>
                <p class="hero-desc">
                    Бэлэн цэс сонгох шаардлагагүй. Зөвхөн гэртээ байгаа орцуудаа бичээд, AI тогоочоос төгс жорыг асуугаарай.
                </p>
                <button class="btn-primary" onclick="startApp()">Эхлүүлэх</button>
            </div>
        </div>
    </div>

    <div id="selection" class="page">
        <div class="container">
            <div class="controls-wrapper">
                <div class="control-box">
                    <span class="control-label">ХООЛНЫ ТӨРӨЛ</span>
                    <select id="cuisine-style" class="style-select">
                        <option value="generic">Тогоочийн сонголт</option>
                        <option value="mongolian">Монгол уламжлалт</option>
                        <option value="asian">Ази хуурга</option>
                        <option value="italian">Итали / Европ</option>
                        <option value="soup">Шөл / Зутан</option>
                        <option value="healthy">Эрүүл / Хөнгөн</option>
                    </select>
                </div>

                <div class="control-box">
                    <span class="control-label">ХҮНИЙ ТОО</span>
                    <div style="display:flex; align-items:center;">
                        <button class="serving-btn" onclick="updateServings(-1)">-</button>
                        <span id="serving-display" class="serving-count">2</span>
                        <button class="serving-btn" onclick="updateServings(1)">+</button>
                    </div>
                </div>
            </div>

            <div class="input-wrapper">
                <input type="text" id="custom-input" class="big-input" placeholder="Орцоо бичээд Enter дар..." onkeypress="handleEnter(event)">
                <span class="enter-hint">ENTER дарж нэмэх</span>
            </div>

            <div id="ingredients-area" class="ingredients-display">
                </div>
            
            <div id="empty-msg" class="empty-state">Одоогоор орц сонгогдоогүй байна.</div>
        </div>

        <div class="action-bar">
            <button id="analyze-btn" class="btn-analyze" onclick="generateAnalysis()" disabled>
                <span>ЖОР БОЛОВСРУУЛАХ</span>
                <span>→</span>
            </button>
        </div>
    </div>

    <div id="result-page" class="page">
        <div class="container">
            <div class="result-header">
                <p class="result-sub">AI ANALYSIS</p>
                <h1 class="result-title">Таны Жорны Профайл</h1>
                <p style="color:#666; font-style:italic;" id="result-summary"></p>
            </div>

            <div class="info-grid">
                <div class="info-card">
                    <span class="info-label">Илчлэг & Шим Тэжээл</span>
                    <div class="info-content">
                        Gemini AI тооцоолно <span class="ai-badge">AI</span>
                    </div>
                    <p style="font-size:0.9rem; color:#666; margin-top:5px;">
                        Таны оруулсан орц болон хүний тоонд үндэслэн нарийн тооцооллыг гаргана.
                    </p>
                </div>

                <div class="info-card">
                    <span class="info-label">Зөвлөмж & Зохимж</span>
                    <div class="info-content" id="pairing-text"></div>
                </div>
            </div>

            <div class="gemini-box">
                <p class="gemini-text">
                    <span id="gemini-count" style="font-weight:bold;"></span> хүнд зориулсан, <span id="gemini-style" style="font-weight:bold;"></span> хэв маягийн жорыг бүрэн эхээр нь авмаар байна уу?
                </p>
                <button class="btn-gemini" onclick="askGemini()">
                    <span>✨ Gemini AI-аас Жор Асуух</span>
                </button>
                <p style="margin-top:15px; font-size:0.8rem; color:#666;">
                    Товч дарснаар таны бүх тохиргоог хуулж, Gemini чатыг автоматаар нээнэ.
                </p>
            </div>

            <button class="start-over" onclick="startOver()">Шинээр эхлэх</button>
        </div>
    </div>

    <script>
        let ingredients = [];
        let servings = 2;

        // --- Navigation ---
        function switchPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
            document.getElementById(pageId).classList.add('active-page');
            document.getElementById(pageId).scrollTop = 0;
        }

        function startApp() { switchPage('selection'); setTimeout(() => document.getElementById('custom-input').focus(), 300); }
        function startOver() { 
            ingredients = []; 
            servings = 2; 
            updateUI(); 
            switchPage('home'); 
        }

        // --- Logic: Servings ---
        function updateServings(change) {
            servings += change;
            if(servings < 1) servings = 1;
            document.getElementById('serving-display').innerText = servings;
        }

        // --- Logic: Ingredients Input ---
        function handleEnter(e) {
            if (e.key === 'Enter') {
                const input = document.getElementById('custom-input');
                const val = input.value.trim();
                if (val) {
                    addIngredient(val);
                    input.value = '';
                }
            }
        }

        function addIngredient(name) {
            // Capitalize first letter
            name = name.charAt(0).toUpperCase() + name.slice(1);
            if (!ingredients.includes(name)) {
                ingredients.push(name);
                updateUI();
            }
        }

        function removeIngredient(name) {
            ingredients = ingredients.filter(i => i !== name);
            updateUI();
        }

        function updateUI() {
            const container = document.getElementById('ingredients-area');
            const emptyMsg = document.getElementById('empty-msg');
            const btn = document.getElementById('analyze-btn');

            container.innerHTML = ingredients.map(ing => `
                <div class="ingredient-chip">
                    ${ing}
                    <span class="chip-remove" onclick="removeIngredient('${ing}')">&times;</span>
                </div>
            `).join('');

            if (ingredients.length > 0) {
                emptyMsg.style.display = 'none';
                btn.disabled = false;
                btn.style.opacity = '1';
                btn.innerHTML = `<span>ЖОР БОЛОВСРУУЛАХ (${ingredients.length})</span> <span>→</span>`;
            } else {
                emptyMsg.style.display = 'block';
                btn.disabled = true;
                btn.style.opacity = '0.5';
                btn.innerHTML = `<span>ЖОР БОЛОВСРУУЛАХ</span> <span>→</span>`;
            }
        }

        // --- Analysis Logic ---
        function generateAnalysis() {
            switchPage('result-page');
            
            const styleSelect = document.getElementById('cuisine-style');
            const styleName = styleSelect.options[styleSelect.selectedIndex].text;
            const styleVal = styleSelect.value;

            // Update Text
            document.getElementById('result-summary').innerText = ingredients.join(' • ');
            document.getElementById('gemini-count').innerText = servings;
            document.getElementById('gemini-style').innerText = styleName;

            // Smart Pairing Logic (Basic)
            let pairing = "Ус, Нимбэгтэй ус";
            
            if (styleVal === 'mongolian') pairing = "Сүүтэй цай, Аарц, Хярам";
            else if (styleVal === 'italian') pairing = "Улаан дарс, Газтай ус";
            else if (styleVal === 'asian') pairing = "Ногоон цай, Шар айраг";
            else if (styleVal === 'healthy') pairing = "Шинэхэн жүүс, Детокс ус";
            else if (styleVal === 'soup') pairing = "Хар талх, Сармистай талх";

            document.getElementById('pairing-text').innerText = pairing;
        }

        // --- Gemini Jump ---
        function askGemini() {
            const style = document.getElementById('cuisine-style').options[document.getElementById('cuisine-style').selectedIndex].text;
            const ingList = ingredients.join(', ');
            
            const prompt = `Та бол мэргэжлийн тогооч. Надад дараах орцууд байна: ${ingList}. Би ${style} хэв маягаар, ${servings} хүнд зориулж хоол хиймээр байна. 1. Эхлээд энэ хоолны нэг хүнд ногдох илчлэг болон шим тэжээлийг тооцоол. 2. Дараа нь алхам алхмаар хийх зааврыг орцны нарийн хэмжээтэй нь (грамм/халбага) бичиж өг.`;
            
            navigator.clipboard.writeText(prompt).then(() => {
                alert("Асуултыг хуулж авлаа! Gemini нээгдэх үед Paste (Ctrl+V) хийгээрэй.");
                window.open('https://gemini.google.com/app', '_blank');
            });
        }
    </script>
</body>
</html>
